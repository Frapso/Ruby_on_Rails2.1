<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>README - rack-test-0.6.3 Documentation</title>

<link href="./fonts.css" rel="stylesheet">
<link href="./rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "./";
</script>

<script src="./js/jquery.js"></script>
<script src="./js/navigation.js"></script>
<script src="./js/search_index.js"></script>
<script src="./js/search.js"></script>
<script src="./js/searcher.js"></script>
<script src="./js/darkfish.js"></script>


<body id="top" role="document" class="file">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="./index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="./table_of_contents.html#pages">Pages</a>
    <a href="./table_of_contents.html#classes">Classes</a>
    <a href="./table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  
<div class="nav-section">
  <h3>Table of Contents</h3>

  <ul class="link-list" role="directory">
    <li><a href="#label-Rack%3A%3ATest+%3Cimg+src%3D%22https%3A%2F%2Fcodeclimate.com%2Fgithub%2Fbrynary%2Frack-test.png%22+%2F%3E+%3Cimg+src%3D%22https%3A%2F%2Fcodeclimate.com%2Fgithub%2Fbrynary%2Frack-test%2Fcoverage.png%22+%2F%3E">Rack::Test <a href="https://codeclimate.com/github/brynary/rack-test"><img src="https://codeclimate.com/github/brynary/rack-test.png" /></a> <a href="https://codeclimate.com/github/brynary/rack-test"><img src="https://codeclimate.com/github/brynary/rack-test/coverage.png" /></a></a>
    <li><a href="#label-Description">Description</a>
    <li><a href="#label-Features">Features</a>
    <li><a href="#label-Examples">Examples</a>
    <li><a href="#label-Install">Install</a>
    <li><a href="#label-Authors">Authors</a>
    <li><a href="#label-License">License</a>
    <li><a href="#label-Releasing">Releasing</a>
  </ul>
</div>


  <div id="project-metadata">
    <div id="fileindex-section" class="nav-section">
  <h3>Pages</h3>

  <ul class="link-list">
  
    <li><a href="./MIT-LICENSE_txt.html">MIT-LICENSE</a>
  
    <li><a href="./README_rdoc.html">README</a>
  
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-label="Page README.rdoc">

<h1 id="label-Rack%3A%3ATest+%3Cimg+src%3D%22https%3A%2F%2Fcodeclimate.com%2Fgithub%2Fbrynary%2Frack-test.png%22+%2F%3E+%3Cimg+src%3D%22https%3A%2F%2Fcodeclimate.com%2Fgithub%2Fbrynary%2Frack-test%2Fcoverage.png%22+%2F%3E">Rack::Test <a href="https://codeclimate.com/github/brynary/rack-test"><img src="https://codeclimate.com/github/brynary/rack-test.png" /></a> <a href="https://codeclimate.com/github/brynary/rack-test"><img src="https://codeclimate.com/github/brynary/rack-test/coverage.png" /></a><span><a href="#label-Rack%3A%3ATest+%3Cimg+src%3D%22https%3A%2F%2Fcodeclimate.com%2Fgithub%2Fbrynary%2Frack-test.png%22+%2F%3E+%3Cimg+src%3D%22https%3A%2F%2Fcodeclimate.com%2Fgithub%2Fbrynary%2Frack-test%2Fcoverage.png%22+%2F%3E">&para;</a> <a href="#documentation">&uarr;</a></span></h1>
<ul><li>
<p>Code: <a
href="http://github.com/brynary/rack-test">github.com/brynary/rack-test</a></p>
</li></ul>

<h2 id="label-Description">Description<span><a href="#label-Description">&para;</a> <a href="#documentation">&uarr;</a></span></h2>

<p>Rack::Test is a small, simple testing API for Rack apps. It can be used on
its own or as a reusable starting point for Web frameworks and testing
libraries to build on. Most of its initial functionality is an extraction
of Merb 1.0&#39;s request helpers feature.</p>

<h2 id="label-Features">Features<span><a href="#label-Features">&para;</a> <a href="#documentation">&uarr;</a></span></h2>
<ul><li>
<p>Maintains a cookie jar across requests</p>
</li><li>
<p>Easily follow redirects when desired</p>
</li><li>
<p>Set request headers to be used by all subsequent requests</p>
</li><li>
<p>Small footprint. Approximately 200 LOC</p>
</li></ul>

<h2 id="label-Examples">Examples<span><a href="#label-Examples">&para;</a> <a href="#documentation">&uarr;</a></span></h2>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&quot;rack/test&quot;</span>

<span class="ruby-keyword">class</span> <span class="ruby-constant">HomepageTest</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">Test</span><span class="ruby-operator">::</span><span class="ruby-constant">Unit</span><span class="ruby-operator">::</span><span class="ruby-constant">TestCase</span>
  <span class="ruby-identifier">include</span> <span class="ruby-constant">Rack</span><span class="ruby-operator">::</span><span class="ruby-constant">Test</span><span class="ruby-operator">::</span><span class="ruby-constant">Methods</span>

  <span class="ruby-keyword">def</span> <span class="ruby-identifier">app</span>
    <span class="ruby-constant">MyApp</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">def</span> <span class="ruby-identifier">test_redirect_logged_in_users_to_dashboard</span>
    <span class="ruby-identifier">authorize</span> <span class="ruby-string">&quot;bryan&quot;</span>, <span class="ruby-string">&quot;secret&quot;</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&quot;/&quot;</span>
    <span class="ruby-identifier">follow_redirect!</span>

    <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;http://example.org/redirected&quot;</span>, <span class="ruby-identifier">last_request</span>.<span class="ruby-identifier">url</span>
    <span class="ruby-identifier">assert</span> <span class="ruby-identifier">last_response</span>.<span class="ruby-identifier">ok?</span>
  <span class="ruby-keyword">end</span>

<span class="ruby-keyword">end</span>
</pre>

<p>If you want to test one app in isolation, you just return that app as shown
above. But if you want to test the entire app stack, including middlewares,
cascades etc. you need to parse the app defined in config.ru.</p>

<pre class="ruby"><span class="ruby-constant">OUTER_APP</span> = <span class="ruby-constant">Rack</span><span class="ruby-operator">::</span><span class="ruby-constant">Builder</span>.<span class="ruby-identifier">parse_file</span>(<span class="ruby-string">&#39;config.ru&#39;</span>).<span class="ruby-identifier">first</span>

<span class="ruby-keyword">class</span> <span class="ruby-constant">TestApp</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">Test</span><span class="ruby-operator">::</span><span class="ruby-constant">Unit</span><span class="ruby-operator">::</span><span class="ruby-constant">TestCase</span>
  <span class="ruby-identifier">include</span> <span class="ruby-constant">Rack</span><span class="ruby-operator">::</span><span class="ruby-constant">Test</span><span class="ruby-operator">::</span><span class="ruby-constant">Methods</span>

  <span class="ruby-keyword">def</span> <span class="ruby-identifier">app</span>
    <span class="ruby-constant">OUTER_APP</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">def</span> <span class="ruby-identifier">test_root</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/&#39;</span>
    <span class="ruby-identifier">assert</span> <span class="ruby-identifier">last_response</span>.<span class="ruby-identifier">ok?</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

<h2 id="label-Install">Install<span><a href="#label-Install">&para;</a> <a href="#documentation">&uarr;</a></span></h2>

<p>To install the latest release as a gem:</p>

<pre>sudo gem install rack-test</pre>

<p>Or via Bundler:</p>

<pre>gem &quot;rack-test&quot;, require: &quot;rack/test&quot;</pre>

<h2 id="label-Authors">Authors<span><a href="#label-Authors">&para;</a> <a href="#documentation">&uarr;</a></span></h2>
<ul><li>
<p>Maintained by <a href="mailto:bryan@brynary.com">Bryan Helmkamp</a></p>
</li><li>
<p>Contributions from Simon Rozet, Pat Nakajima and others</p>
</li><li>
<p>Much of the original code was extracted from Merb 1.0&#39;s request helper</p>
</li></ul>

<h2 id="label-License">License<span><a href="#label-License">&para;</a> <a href="#documentation">&uarr;</a></span></h2>

<p>Copyright Â© 2008-2009 Bryan Helmkamp, Engine Yard Inc. See <a
href="MIT-LICENSE_txt.html">MIT-LICENSE.txt</a> in this directory.</p>

<h2 id="label-Releasing">Releasing<span><a href="#label-Releasing">&para;</a> <a href="#documentation">&uarr;</a></span></h2>
<ul><li>
<p>Ensure History.txt is up-to-date</p>
</li><li>
<p>Bump VERSION in lib/rack/test.rb</p>
</li><li>
<p>thor :release</p>
</li></ul>
</main>



<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://rdoc.rubyforge.org">RDoc</a> 4.1.0.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

