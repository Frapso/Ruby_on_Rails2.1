<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>module ActiveRecord::ConnectionAdapters::SQLServer::SchemaStatements - activerecord-sqlserver-adapter-4.2.3 Documentation</title>

<link href="../../../fonts.css" rel="stylesheet">
<link href="../../../rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "../../../";
</script>

<script src="../../../js/jquery.js"></script>
<script src="../../../js/navigation.js"></script>
<script src="../../../js/search_index.js"></script>
<script src="../../../js/search.js"></script>
<script src="../../../js/searcher.js"></script>
<script src="../../../js/darkfish.js"></script>


<body id="top" role="document" class="module">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../../../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../../../table_of_contents.html#pages">Pages</a>
    <a href="../../../table_of_contents.html#classes">Classes</a>
    <a href="../../../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    
    
    
    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li ><a href="#method-i-change_column">#change_column</a>
    
    <li ><a href="#method-i-change_column_default">#change_column_default</a>
    
    <li ><a href="#method-i-change_column_null">#change_column_null</a>
    
    <li ><a href="#method-i-column_definitions">#column_definitions</a>
    
    <li ><a href="#method-i-columns">#columns</a>
    
    <li class="calls-super" ><a href="#method-i-columns_for_distinct">#columns_for_distinct</a>
    
    <li class="calls-super" ><a href="#method-i-create_table">#create_table</a>
    
    <li ><a href="#method-i-create_table_definition">#create_table_definition</a>
    
    <li ><a href="#method-i-default_constraint_name">#default_constraint_name</a>
    
    <li ><a href="#method-i-detect_column_for-21">#detect_column_for!</a>
    
    <li ><a href="#method-i-extract_foreign_key_action">#extract_foreign_key_action</a>
    
    <li ><a href="#method-i-foreign_keys">#foreign_keys</a>
    
    <li ><a href="#method-i-get_table_name">#get_table_name</a>
    
    <li ><a href="#method-i-identity_column">#identity_column</a>
    
    <li ><a href="#method-i-indexes">#indexes</a>
    
    <li ><a href="#method-i-info_schema_table_name_column">#info_schema_table_name_column</a>
    
    <li ><a href="#method-i-info_schema_table_schema_column">#info_schema_table_schema_column</a>
    
    <li ><a href="#method-i-initialize_native_database_types">#initialize_native_database_types</a>
    
    <li ><a href="#method-i-insert_sql-3F">#insert_sql?</a>
    
    <li ><a href="#method-i-lowercase_schema_reflection_sql">#lowercase_schema_reflection_sql</a>
    
    <li ><a href="#method-i-native_database_types">#native_database_types</a>
    
    <li ><a href="#method-i-new_column">#new_column</a>
    
    <li ><a href="#method-i-query_requires_identity_insert-3F">#query_requires_identity_insert?</a>
    
    <li ><a href="#method-i-remove_check_constraints">#remove_check_constraints</a>
    
    <li ><a href="#method-i-remove_column">#remove_column</a>
    
    <li ><a href="#method-i-remove_default_constraint">#remove_default_constraint</a>
    
    <li ><a href="#method-i-remove_index-21">#remove_index!</a>
    
    <li ><a href="#method-i-remove_indexes">#remove_indexes</a>
    
    <li ><a href="#method-i-rename_column">#rename_column</a>
    
    <li ><a href="#method-i-rename_index">#rename_index</a>
    
    <li ><a href="#method-i-rename_table">#rename_table</a>
    
    <li class="calls-super" ><a href="#method-i-table_exists-3F">#table_exists?</a>
    
    <li ><a href="#method-i-table_name_or_views_table_name">#table_name_or_views_table_name</a>
    
    <li ><a href="#method-i-tables">#tables</a>
    
    <li class="calls-super" ><a href="#method-i-type_to_sql">#type_to_sql</a>
    
    <li ><a href="#method-i-view_information">#view_information</a>
    
    <li ><a href="#method-i-view_table_name">#view_table_name</a>
    
    <li ><a href="#method-i-views">#views</a>
    
    <li ><a href="#method-i-views_real_column_name">#views_real_column_name</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="module-ActiveRecord::ConnectionAdapters::SQLServer::SchemaStatements">
  <h1 id="module-ActiveRecord::ConnectionAdapters::SQLServer::SchemaStatements" class="module">
    module ActiveRecord::ConnectionAdapters::SQLServer::SchemaStatements
  </h1>

  <section class="description">
    
  </section>

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    

    
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

    
      <div id="method-i-change_column" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">change_column</span><span
            class="method-args">(table_name, column_name, type, options = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="change_column-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/sqlserver/schema_statements.rb, line 71</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">change_column</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">column_name</span>, <span class="ruby-identifier">type</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">sql_commands</span> = []
  <span class="ruby-identifier">indexes</span> = []
  <span class="ruby-identifier">column_object</span> = <span class="ruby-identifier">schema_cache</span>.<span class="ruby-identifier">columns</span>(<span class="ruby-identifier">table_name</span>).<span class="ruby-identifier">find</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">column_name</span>.<span class="ruby-identifier">to_s</span> }
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">options_include_default?</span>(<span class="ruby-identifier">options</span>) <span class="ruby-operator">||</span> (<span class="ruby-identifier">column_object</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">column_object</span>.<span class="ruby-identifier">type</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">type</span>.<span class="ruby-identifier">to_sym</span>)
    <span class="ruby-identifier">remove_default_constraint</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">column_name</span>)
    <span class="ruby-identifier">indexes</span> = <span class="ruby-identifier">indexes</span>(<span class="ruby-identifier">table_name</span>).<span class="ruby-identifier">select</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">index</span><span class="ruby-operator">|</span> <span class="ruby-identifier">index</span>.<span class="ruby-identifier">columns</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">column_name</span>.<span class="ruby-identifier">to_s</span>) }
    <span class="ruby-identifier">remove_indexes</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">column_name</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">sql_commands</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;UPDATE #{quote_table_name(table_name)} SET #{quote_column_name(column_name)}=#{quote_default_value(options[:default], column_object)} WHERE #{quote_column_name(column_name)} IS NULL&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">options</span>[<span class="ruby-value">:null</span>].<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:null</span>] <span class="ruby-operator">==</span> <span class="ruby-keyword">false</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">options</span>[<span class="ruby-value">:default</span>].<span class="ruby-identifier">nil?</span>
  <span class="ruby-identifier">sql_commands</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;ALTER TABLE #{quote_table_name(table_name)} ALTER COLUMN #{quote_column_name(column_name)} #{type_to_sql(type, options[:limit], options[:precision], options[:scale])}&quot;</span>
  <span class="ruby-identifier">sql_commands</span>[<span class="ruby-value">-1</span>] <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&#39; NOT NULL&#39;</span> <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">options</span>[<span class="ruby-value">:null</span>].<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:null</span>] <span class="ruby-operator">==</span> <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">options_include_default?</span>(<span class="ruby-identifier">options</span>)
    <span class="ruby-identifier">sql_commands</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;ALTER TABLE #{quote_table_name(table_name)} ADD CONSTRAINT #{default_constraint_name(table_name, column_name)} DEFAULT #{quote_default_value(options[:default], column_object)} FOR #{quote_column_name(column_name)}&quot;</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment"># Add any removed indexes back</span>
  <span class="ruby-identifier">indexes</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">index</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">sql_commands</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;CREATE INDEX #{quote_table_name(index.name)} ON #{quote_table_name(table_name)} (#{index.columns.map { |c| quote_column_name(c) }.join(&#39;, &#39;)})&quot;</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">sql_commands</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">do_execute</span>(<span class="ruby-identifier">c</span>) }
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-change_column_default" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">change_column_default</span><span
            class="method-args">(table_name, column_name, default)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="change_column_default-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/sqlserver/schema_statements.rb, line 93</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">change_column_default</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">column_name</span>, <span class="ruby-identifier">default</span>)
  <span class="ruby-identifier">remove_default_constraint</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">column_name</span>)
  <span class="ruby-identifier">column_object</span> = <span class="ruby-identifier">schema_cache</span>.<span class="ruby-identifier">columns</span>(<span class="ruby-identifier">table_name</span>).<span class="ruby-identifier">find</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">column_name</span>.<span class="ruby-identifier">to_s</span> }
  <span class="ruby-identifier">do_execute</span> <span class="ruby-node">&quot;ALTER TABLE #{quote_table_name(table_name)} ADD CONSTRAINT #{default_constraint_name(table_name, column_name)} DEFAULT #{quote_default_value(default, column_object)} FOR #{quote_column_name(column_name)}&quot;</span>
  <span class="ruby-identifier">schema_cache</span>.<span class="ruby-identifier">clear_table_cache!</span>(<span class="ruby-identifier">table_name</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-change_column_null" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">change_column_null</span><span
            class="method-args">(table_name, column_name, allow_null, default = nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="change_column_null-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/sqlserver/schema_statements.rb, line 168</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">change_column_null</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">column_name</span>, <span class="ruby-identifier">allow_null</span>, <span class="ruby-identifier">default</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">table_id</span> = <span class="ruby-constant">SQLServer</span><span class="ruby-operator">::</span><span class="ruby-constant">Utils</span>.<span class="ruby-identifier">extract_identifiers</span>(<span class="ruby-identifier">table_name</span>)
  <span class="ruby-identifier">column_id</span> = <span class="ruby-constant">SQLServer</span><span class="ruby-operator">::</span><span class="ruby-constant">Utils</span>.<span class="ruby-identifier">extract_identifiers</span>(<span class="ruby-identifier">column_name</span>)
  <span class="ruby-identifier">column</span> = <span class="ruby-identifier">detect_column_for!</span> <span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">column_name</span>
  <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">allow_null</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">allow_null</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">false</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">default</span>.<span class="ruby-identifier">nil?</span>
    <span class="ruby-identifier">do_execute</span>(<span class="ruby-node">&quot;UPDATE #{table_id} SET #{column_id}=#{quote(default)} WHERE #{column_id} IS NULL&quot;</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">sql</span> = <span class="ruby-node">&quot;ALTER TABLE #{table_id} ALTER COLUMN #{column_id} #{type_to_sql column.type, column.limit, column.precision, column.scale}&quot;</span>
  <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&#39; NOT NULL&#39;</span> <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">allow_null</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">allow_null</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">false</span>
  <span class="ruby-identifier">do_execute</span> <span class="ruby-identifier">sql</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-columns" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">columns</span><span
            class="method-args">(table_name, _name = nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="columns-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/sqlserver/schema_statements.rb, line 45</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">columns</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">_name</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-keyword">return</span> [] <span class="ruby-keyword">if</span> <span class="ruby-identifier">table_name</span>.<span class="ruby-identifier">blank?</span>
  <span class="ruby-identifier">column_definitions</span>(<span class="ruby-identifier">table_name</span>).<span class="ruby-identifier">map</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ci</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">sqlserver_options</span> = <span class="ruby-identifier">ci</span>.<span class="ruby-identifier">slice</span> <span class="ruby-value">:ordinal_position</span>, <span class="ruby-value">:is_primary</span>, <span class="ruby-value">:is_identity</span>, <span class="ruby-value">:default_function</span>, <span class="ruby-value">:table_name</span>
    <span class="ruby-identifier">cast_type</span> = <span class="ruby-identifier">lookup_cast_type</span>(<span class="ruby-identifier">ci</span>[<span class="ruby-value">:type</span>])
    <span class="ruby-identifier">new_column</span> <span class="ruby-identifier">ci</span>[<span class="ruby-value">:name</span>], <span class="ruby-identifier">ci</span>[<span class="ruby-value">:default_value</span>], <span class="ruby-identifier">cast_type</span>, <span class="ruby-identifier">ci</span>[<span class="ruby-value">:type</span>], <span class="ruby-identifier">ci</span>[<span class="ruby-value">:null</span>], <span class="ruby-identifier">sqlserver_options</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-columns_for_distinct" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">columns_for_distinct</span><span
            class="method-args">(columns, orders)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          
            <div class="method-calls-super">
              Calls superclass method
              
            </div>
          

          
          <div class="method-source-code" id="columns_for_distinct-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/sqlserver/schema_statements.rb, line 159</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">columns_for_distinct</span>(<span class="ruby-identifier">columns</span>, <span class="ruby-identifier">orders</span>)
  <span class="ruby-identifier">order_columns</span> = <span class="ruby-identifier">orders</span>.<span class="ruby-identifier">reject</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:blank?</span>).<span class="ruby-identifier">map</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">s</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">s</span> = <span class="ruby-identifier">s</span>.<span class="ruby-identifier">to_sql</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">String</span>)
      <span class="ruby-identifier">s</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/\s+(?:ASC|DESC)\b/i</span>, <span class="ruby-string">&#39;&#39;</span>)
       .<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/\s+NULLS\s+(?:FIRST|LAST)\b/i</span>, <span class="ruby-string">&#39;&#39;</span>)
    }.<span class="ruby-identifier">reject</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:blank?</span>).<span class="ruby-identifier">map</span>.<span class="ruby-identifier">with_index</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">column</span>, <span class="ruby-identifier">i</span><span class="ruby-operator">|</span> <span class="ruby-node">&quot;#{column} AS alias_#{i}&quot;</span> }
  [<span class="ruby-keyword">super</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">order_columns</span>].<span class="ruby-identifier">join</span>(<span class="ruby-string">&#39;, &#39;</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-create_table" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">create_table</span><span
            class="method-args">(table_name, options = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          
            <div class="method-calls-super">
              Calls superclass method
              
            </div>
          

          
          <div class="method-source-code" id="create_table-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/sqlserver/schema_statements.rb, line 20</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">create_table</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">res</span> = <span class="ruby-keyword">super</span>
  <span class="ruby-identifier">schema_cache</span>.<span class="ruby-identifier">clear_table_cache!</span>(<span class="ruby-identifier">table_name</span>)
  <span class="ruby-identifier">res</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-extract_foreign_key_action" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">extract_foreign_key_action</span><span
            class="method-args">(action, fk_name)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="extract_foreign_key_action-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/sqlserver/schema_statements.rb, line 136</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">extract_foreign_key_action</span>(<span class="ruby-identifier">action</span>, <span class="ruby-identifier">fk_name</span>)
  <span class="ruby-keyword">case</span> <span class="ruby-identifier">select_value</span>(<span class="ruby-node">&quot;SELECT #{action}_referential_action_desc FROM sys.foreign_keys WHERE name = &#39;#{fk_name}&#39;&quot;</span>)
  <span class="ruby-keyword">when</span> <span class="ruby-string">&#39;CASCADE&#39;</span> <span class="ruby-keyword">then</span> <span class="ruby-value">:cascade</span>
  <span class="ruby-keyword">when</span> <span class="ruby-string">&#39;SET_NULL&#39;</span> <span class="ruby-keyword">then</span> <span class="ruby-value">:nullify</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-foreign_keys" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">foreign_keys</span><span
            class="method-args">(table_name)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="foreign_keys-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/sqlserver/schema_statements.rb, line 119</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">foreign_keys</span>(<span class="ruby-identifier">table_name</span>)
  <span class="ruby-identifier">identifier</span> = <span class="ruby-constant">SQLServer</span><span class="ruby-operator">::</span><span class="ruby-constant">Utils</span>.<span class="ruby-identifier">extract_identifiers</span>(<span class="ruby-identifier">table_name</span>)
  <span class="ruby-identifier">fk_info</span> = <span class="ruby-identifier">execute_procedure</span> <span class="ruby-value">:sp_fkeys</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">identifier</span>.<span class="ruby-identifier">schema</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">identifier</span>.<span class="ruby-identifier">object</span>, <span class="ruby-identifier">identifier</span>.<span class="ruby-identifier">schema</span>
  <span class="ruby-identifier">fk_info</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">row</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">from_table</span> = <span class="ruby-identifier">identifier</span>.<span class="ruby-identifier">object</span>
    <span class="ruby-identifier">to_table</span> = <span class="ruby-identifier">row</span>[<span class="ruby-string">&#39;PKTABLE_NAME&#39;</span>]
    <span class="ruby-identifier">options</span> = {
      <span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-identifier">row</span>[<span class="ruby-string">&#39;FK_NAME&#39;</span>],
      <span class="ruby-identifier">column</span><span class="ruby-operator">:</span> <span class="ruby-identifier">row</span>[<span class="ruby-string">&#39;FKCOLUMN_NAME&#39;</span>],
      <span class="ruby-identifier">primary_key</span><span class="ruby-operator">:</span> <span class="ruby-identifier">row</span>[<span class="ruby-string">&#39;PKCOLUMN_NAME&#39;</span>],
      <span class="ruby-identifier">on_update</span><span class="ruby-operator">:</span> <span class="ruby-identifier">extract_foreign_key_action</span>(<span class="ruby-string">&#39;update&#39;</span>, <span class="ruby-identifier">row</span>[<span class="ruby-string">&#39;FK_NAME&#39;</span>]),
      <span class="ruby-identifier">on_delete</span><span class="ruby-operator">:</span> <span class="ruby-identifier">extract_foreign_key_action</span>(<span class="ruby-string">&#39;delete&#39;</span>, <span class="ruby-identifier">row</span>[<span class="ruby-string">&#39;FK_NAME&#39;</span>])
    }
    <span class="ruby-constant">ForeignKeyDefinition</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">from_table</span>, <span class="ruby-identifier">to_table</span>, <span class="ruby-identifier">options</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-indexes" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">indexes</span><span
            class="method-args">(table_name, name = nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="indexes-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/sqlserver/schema_statements.rb, line 26</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">indexes</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">name</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">data</span> = <span class="ruby-identifier">select</span>(<span class="ruby-node">&quot;EXEC sp_helpindex #{quote(table_name)}&quot;</span>, <span class="ruby-identifier">name</span>) <span class="ruby-keyword">rescue</span> []
  <span class="ruby-identifier">data</span>.<span class="ruby-identifier">reduce</span>([]) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">indexes</span>, <span class="ruby-identifier">index</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">index</span> = <span class="ruby-identifier">index</span>.<span class="ruby-identifier">with_indifferent_access</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">index</span>[<span class="ruby-value">:index_description</span>] <span class="ruby-operator">=~</span> <span class="ruby-regexp">/primary key/</span>
      <span class="ruby-identifier">indexes</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">name</span>    = <span class="ruby-identifier">index</span>[<span class="ruby-value">:index_name</span>]
      <span class="ruby-identifier">unique</span>  = <span class="ruby-identifier">index</span>[<span class="ruby-value">:index_description</span>] <span class="ruby-operator">=~</span> <span class="ruby-regexp">/unique/</span>
      <span class="ruby-identifier">columns</span> = <span class="ruby-identifier">index</span>[<span class="ruby-value">:index_keys</span>].<span class="ruby-identifier">split</span>(<span class="ruby-string">&#39;,&#39;</span>).<span class="ruby-identifier">map</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">column</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">column</span>.<span class="ruby-identifier">strip!</span>
        <span class="ruby-identifier">column</span>.<span class="ruby-identifier">gsub!</span> <span class="ruby-string">&#39;(-)&#39;</span>, <span class="ruby-string">&#39;&#39;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">column</span>.<span class="ruby-identifier">ends_with?</span>(<span class="ruby-string">&#39;(-)&#39;</span>)
        <span class="ruby-identifier">column</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-identifier">indexes</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">IndexDefinition</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">name</span>, <span class="ruby-identifier">unique</span>, <span class="ruby-identifier">columns</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-native_database_types" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">native_database_types</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="native_database_types-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/sqlserver/schema_statements.rb, line 6</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">native_database_types</span>
  <span class="ruby-ivar">@native_database_types</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">initialize_native_database_types</span>.<span class="ruby-identifier">freeze</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-new_column" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">new_column</span><span
            class="method-args">(name, default, cast_type, sql_type = nil, null = true, sqlserver_options={})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="new_column-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/sqlserver/schema_statements.rb, line 54</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">new_column</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">default</span>, <span class="ruby-identifier">cast_type</span>, <span class="ruby-identifier">sql_type</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">null</span> = <span class="ruby-keyword">true</span>, <span class="ruby-identifier">sqlserver_options</span>={})
  <span class="ruby-constant">SQLServerColumn</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">name</span>, <span class="ruby-identifier">default</span>, <span class="ruby-identifier">cast_type</span>, <span class="ruby-identifier">sql_type</span>, <span class="ruby-identifier">null</span>, <span class="ruby-identifier">sqlserver_options</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-remove_column" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">remove_column</span><span
            class="method-args">(table_name, column_name, _type = nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="remove_column-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/sqlserver/schema_statements.rb, line 63</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">remove_column</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">column_name</span>, <span class="ruby-identifier">_type</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;You must specify at least one column name.  Example: remove_column(:people, :first_name)&#39;</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">column_name</span>.<span class="ruby-identifier">is_a?</span> <span class="ruby-constant">Array</span>
  <span class="ruby-identifier">remove_check_constraints</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">column_name</span>)
  <span class="ruby-identifier">remove_default_constraint</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">column_name</span>)
  <span class="ruby-identifier">remove_indexes</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">column_name</span>)
  <span class="ruby-identifier">do_execute</span> <span class="ruby-node">&quot;ALTER TABLE #{quote_table_name(table_name)} DROP COLUMN #{quote_column_name(column_name)}&quot;</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-remove_index-21" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">remove_index!</span><span
            class="method-args">(table_name, index_name)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="remove_index-21-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/sqlserver/schema_statements.rb, line 115</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">remove_index!</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">index_name</span>)
  <span class="ruby-identifier">do_execute</span> <span class="ruby-node">&quot;DROP INDEX #{quote_column_name(index_name)} ON #{quote_table_name(table_name)}&quot;</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-rename_column" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">rename_column</span><span
            class="method-args">(table_name, column_name, new_column_name)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="rename_column-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/sqlserver/schema_statements.rb, line 100</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">rename_column</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">column_name</span>, <span class="ruby-identifier">new_column_name</span>)
  <span class="ruby-identifier">schema_cache</span>.<span class="ruby-identifier">clear_table_cache!</span>(<span class="ruby-identifier">table_name</span>)
  <span class="ruby-identifier">detect_column_for!</span> <span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">column_name</span>
  <span class="ruby-identifier">identifier</span> = <span class="ruby-constant">SQLServer</span><span class="ruby-operator">::</span><span class="ruby-constant">Utils</span>.<span class="ruby-identifier">extract_identifiers</span>(<span class="ruby-node">&quot;#{table_name}.#{column_name}&quot;</span>)
  <span class="ruby-identifier">execute_procedure</span> <span class="ruby-value">:sp_rename</span>, <span class="ruby-identifier">identifier</span>.<span class="ruby-identifier">quoted</span>, <span class="ruby-identifier">new_column_name</span>, <span class="ruby-string">&#39;COLUMN&#39;</span>
  <span class="ruby-identifier">rename_column_indexes</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">column_name</span>, <span class="ruby-identifier">new_column_name</span>)
  <span class="ruby-identifier">schema_cache</span>.<span class="ruby-identifier">clear_table_cache!</span>(<span class="ruby-identifier">table_name</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-rename_index" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">rename_index</span><span
            class="method-args">(table_name, old_name, new_name)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="rename_index-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/sqlserver/schema_statements.rb, line 109</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">rename_index</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">old_name</span>, <span class="ruby-identifier">new_name</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;Index name &#39;#{new_name}&#39; on table &#39;#{table_name}&#39; is too long; the limit is #{allowed_index_name_length} characters&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">new_name</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">allowed_index_name_length</span>
  <span class="ruby-identifier">identifier</span> = <span class="ruby-constant">SQLServer</span><span class="ruby-operator">::</span><span class="ruby-constant">Utils</span>.<span class="ruby-identifier">extract_identifiers</span>(<span class="ruby-node">&quot;#{table_name}.#{old_name}&quot;</span>)
  <span class="ruby-identifier">execute_procedure</span> <span class="ruby-value">:sp_rename</span>, <span class="ruby-identifier">identifier</span>.<span class="ruby-identifier">quoted</span>, <span class="ruby-identifier">new_name</span>, <span class="ruby-string">&#39;INDEX&#39;</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-rename_table" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">rename_table</span><span
            class="method-args">(table_name, new_name)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="rename_table-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/sqlserver/schema_statements.rb, line 58</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">rename_table</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">new_name</span>)
  <span class="ruby-identifier">do_execute</span> <span class="ruby-node">&quot;EXEC sp_rename &#39;#{table_name}&#39;, &#39;#{new_name}&#39;&quot;</span>
  <span class="ruby-identifier">rename_table_indexes</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">new_name</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-table_exists-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">table_exists?</span><span
            class="method-args">(table_name)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          
            <div class="method-calls-super">
              Calls superclass method
              
            </div>
          

          
          <div class="method-source-code" id="table_exists-3F-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/sqlserver/schema_statements.rb, line 14</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">table_exists?</span>(<span class="ruby-identifier">table_name</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">table_name</span>.<span class="ruby-identifier">blank?</span>
  <span class="ruby-identifier">unquoted_table_name</span> = <span class="ruby-constant">SQLServer</span><span class="ruby-operator">::</span><span class="ruby-constant">Utils</span>.<span class="ruby-identifier">extract_identifiers</span>(<span class="ruby-identifier">table_name</span>).<span class="ruby-identifier">object</span>
  <span class="ruby-keyword">super</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tables</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">unquoted_table_name</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">views</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">unquoted_table_name</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-tables" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">tables</span><span
            class="method-args">(table_type = 'BASE TABLE')</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="tables-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/sqlserver/schema_statements.rb, line 10</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">tables</span>(<span class="ruby-identifier">table_type</span> = <span class="ruby-string">&#39;BASE TABLE&#39;</span>)
  <span class="ruby-identifier">select_values</span> <span class="ruby-node">&quot;SELECT #{lowercase_schema_reflection_sql(&#39;TABLE_NAME&#39;)} FROM INFORMATION_SCHEMA.TABLES #{&quot;WHERE TABLE_TYPE = &#39;#{table_type}&#39;&quot; if table_type} ORDER BY TABLE_NAME&quot;</span>, <span class="ruby-string">&#39;SCHEMA&#39;</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-type_to_sql" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">type_to_sql</span><span
            class="method-args">(type, limit = nil, precision = nil, scale = nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          
            <div class="method-calls-super">
              Calls superclass method
              
            </div>
          

          
          <div class="method-source-code" id="type_to_sql-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/sqlserver/schema_statements.rb, line 143</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">type_to_sql</span>(<span class="ruby-identifier">type</span>, <span class="ruby-identifier">limit</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">precision</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">scale</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">type_limitable</span> = <span class="ruby-node">%w(string integer float char nchar varchar nvarchar)</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">type</span>.<span class="ruby-identifier">to_s</span>)
  <span class="ruby-identifier">limit</span> = <span class="ruby-keyword">nil</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">type_limitable</span>
  <span class="ruby-keyword">case</span> <span class="ruby-identifier">type</span>.<span class="ruby-identifier">to_s</span>
  <span class="ruby-keyword">when</span> <span class="ruby-string">&#39;integer&#39;</span>
    <span class="ruby-keyword">case</span> <span class="ruby-identifier">limit</span>
    <span class="ruby-keyword">when</span> <span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">2</span>       <span class="ruby-keyword">then</span>  <span class="ruby-string">&#39;smallint&#39;</span>
    <span class="ruby-keyword">when</span> <span class="ruby-value">3</span><span class="ruby-operator">..</span><span class="ruby-value">4</span>, <span class="ruby-keyword">nil</span>  <span class="ruby-keyword">then</span>  <span class="ruby-string">&#39;integer&#39;</span>
    <span class="ruby-keyword">when</span> <span class="ruby-value">5</span><span class="ruby-operator">..</span><span class="ruby-value">8</span>       <span class="ruby-keyword">then</span>  <span class="ruby-string">&#39;bigint&#39;</span>
    <span class="ruby-keyword">else</span> <span class="ruby-identifier">raise</span>(<span class="ruby-constant">ActiveRecordError</span>, <span class="ruby-node">&quot;No integer type has byte size #{limit}. Use a numeric with precision 0 instead.&quot;</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-keyword">super</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-views" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">views</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <h3 id="method-i-views-label-SQLServer+Specific+%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D+%23">SQLServer Specific ======================================== #<span><a href="#method-i-views-label-SQLServer+Specific+%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D+%23">&para;</a> <a href="#documentation">&uarr;</a></span></h3>
          
          

          
          <div class="method-source-code" id="views-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/sqlserver/schema_statements.rb, line 182</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">views</span>
  <span class="ruby-identifier">tables</span>(<span class="ruby-string">&#39;VIEW&#39;</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="protected-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Protected Instance Methods</h3>
       </header>

    
      <div id="method-i-column_definitions" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">column_definitions</span><span
            class="method-args">(table_name)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="column_definitions-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/sqlserver/schema_statements.rb, line 222</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">column_definitions</span>(<span class="ruby-identifier">table_name</span>)
  <span class="ruby-identifier">identifier</span>  = <span class="ruby-constant">SQLServer</span><span class="ruby-operator">::</span><span class="ruby-constant">Utils</span>.<span class="ruby-identifier">extract_identifiers</span>(<span class="ruby-identifier">table_name</span>)
  <span class="ruby-identifier">database</span>    = <span class="ruby-node">&quot;#{identifier.database_quoted}.&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">identifier</span>.<span class="ruby-identifier">database_quoted</span>
  <span class="ruby-identifier">view_exists</span> = <span class="ruby-identifier">schema_cache</span>.<span class="ruby-identifier">view_exists?</span>(<span class="ruby-identifier">table_name</span>)
  <span class="ruby-identifier">view_tblnm</span>  = <span class="ruby-identifier">table_name_or_views_table_name</span>(<span class="ruby-identifier">table_name</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">view_exists</span>
  <span class="ruby-identifier">sql</span> = <span class="ruby-node">%Q{
    SELECT DISTINCT
    #{lowercase_schema_reflection_sql(&#39;columns.TABLE_NAME&#39;)} AS table_name,
    #{lowercase_schema_reflection_sql(&#39;columns.COLUMN_NAME&#39;)} AS name,
    columns.DATA_TYPE AS type,
    columns.COLUMN_DEFAULT AS default_value,
    columns.NUMERIC_SCALE AS numeric_scale,
    columns.NUMERIC_PRECISION AS numeric_precision,
    columns.DATETIME_PRECISION AS datetime_precision,
    columns.ordinal_position,
    CASE
      WHEN columns.DATA_TYPE IN (&#39;nchar&#39;,&#39;nvarchar&#39;) THEN columns.CHARACTER_MAXIMUM_LENGTH
      ELSE COL_LENGTH(&#39;#{database}&#39;+columns.TABLE_SCHEMA+&#39;.&#39;+columns.TABLE_NAME, columns.COLUMN_NAME)
    END AS [length],
    CASE
      WHEN columns.IS_NULLABLE = &#39;YES&#39; THEN 1
      ELSE NULL
    END AS [is_nullable],
    CASE
      WHEN KCU.COLUMN_NAME IS NOT NULL AND TC.CONSTRAINT_TYPE = N&#39;PRIMARY KEY&#39; THEN 1
      ELSE NULL
    END AS [is_primary],
    c.is_identity AS [is_identity]
    FROM #{database}INFORMATION_SCHEMA.COLUMNS columns
    LEFT OUTER JOIN #{database}INFORMATION_SCHEMA.TABLE_CONSTRAINTS AS TC
      ON TC.TABLE_NAME = columns.TABLE_NAME
      AND TC.CONSTRAINT_TYPE = N&#39;PRIMARY KEY&#39;
    LEFT OUTER JOIN #{database}INFORMATION_SCHEMA.KEY_COLUMN_USAGE AS KCU
      ON KCU.COLUMN_NAME = columns.COLUMN_NAME
      AND KCU.CONSTRAINT_NAME = TC.CONSTRAINT_NAME
      AND KCU.CONSTRAINT_CATALOG = TC.CONSTRAINT_CATALOG
      AND KCU.CONSTRAINT_SCHEMA = TC.CONSTRAINT_SCHEMA
    INNER JOIN #{identifier.database_quoted}.sys.schemas AS s
      ON s.name = columns.TABLE_SCHEMA
      AND s.schema_id = s.schema_id
    INNER JOIN #{identifier.database_quoted}.sys.objects AS o
      ON s.schema_id = o.schema_id
      AND o.is_ms_shipped = 0
      AND o.type IN (&#39;U&#39;, &#39;V&#39;)
      AND o.name = columns.TABLE_NAME
    INNER JOIN #{identifier.database_quoted}.sys.columns AS c
      ON o.object_id = c.object_id
      AND c.name = columns.COLUMN_NAME
    WHERE columns.TABLE_NAME = @0
      AND columns.TABLE_SCHEMA = #{identifier.schema.blank? ? &#39;schema_name()&#39; : &#39;@1&#39;}
    ORDER BY columns.ordinal_position
  }</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/[ \t\r\n]+/</span>, <span class="ruby-string">&#39; &#39;</span>)
  <span class="ruby-identifier">binds</span> = [[<span class="ruby-identifier">info_schema_table_name_column</span>, <span class="ruby-identifier">identifier</span>.<span class="ruby-identifier">object</span>]]
  <span class="ruby-identifier">binds</span> <span class="ruby-operator">&lt;&lt;</span> [<span class="ruby-identifier">info_schema_table_schema_column</span>, <span class="ruby-identifier">identifier</span>.<span class="ruby-identifier">schema</span>] <span class="ruby-keyword">unless</span> <span class="ruby-identifier">identifier</span>.<span class="ruby-identifier">schema</span>.<span class="ruby-identifier">blank?</span>
  <span class="ruby-identifier">results</span> = <span class="ruby-identifier">sp_executesql</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-string">&#39;SCHEMA&#39;</span>, <span class="ruby-identifier">binds</span>)
  <span class="ruby-identifier">results</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ci</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">ci</span> = <span class="ruby-identifier">ci</span>.<span class="ruby-identifier">symbolize_keys</span>
    <span class="ruby-identifier">ci</span>[<span class="ruby-value">:_type</span>] = <span class="ruby-identifier">ci</span>[<span class="ruby-value">:type</span>]
    <span class="ruby-identifier">ci</span>[<span class="ruby-value">:table_name</span>] = <span class="ruby-identifier">view_tblnm</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">table_name</span>
    <span class="ruby-identifier">ci</span>[<span class="ruby-value">:type</span>] = <span class="ruby-keyword">case</span> <span class="ruby-identifier">ci</span>[<span class="ruby-value">:type</span>]
                <span class="ruby-keyword">when</span> <span class="ruby-regexp">/^bit|image|text|ntext|datetime$/</span>
                  <span class="ruby-identifier">ci</span>[<span class="ruby-value">:type</span>]
                <span class="ruby-keyword">when</span> <span class="ruby-regexp">/^time$/i</span>
                  <span class="ruby-node">&quot;#{ci[:type]}(#{ci[:datetime_precision]})&quot;</span>
                <span class="ruby-keyword">when</span> <span class="ruby-regexp">/^numeric|decimal$/i</span>
                  <span class="ruby-node">&quot;#{ci[:type]}(#{ci[:numeric_precision]},#{ci[:numeric_scale]})&quot;</span>
                <span class="ruby-keyword">when</span> <span class="ruby-regexp">/^float|real$/i</span>
                  <span class="ruby-node">&quot;#{ci[:type]}&quot;</span>
                <span class="ruby-keyword">when</span> <span class="ruby-regexp">/^char|nchar|varchar|nvarchar|binary|varbinary|bigint|int|smallint$/</span>
                  <span class="ruby-identifier">ci</span>[<span class="ruby-value">:length</span>].<span class="ruby-identifier">to_i</span> <span class="ruby-operator">==</span> <span class="ruby-value">-1</span> <span class="ruby-operator">?</span> <span class="ruby-node">&quot;#{ci[:type]}(max)&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-node">&quot;#{ci[:type]}(#{ci[:length]})&quot;</span>
                <span class="ruby-keyword">else</span>
                  <span class="ruby-identifier">ci</span>[<span class="ruby-value">:type</span>]
                <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">ci</span>[<span class="ruby-value">:default_value</span>],
    <span class="ruby-identifier">ci</span>[<span class="ruby-value">:default_function</span>] = <span class="ruby-keyword">begin</span>
      <span class="ruby-identifier">default</span> = <span class="ruby-identifier">ci</span>[<span class="ruby-value">:default_value</span>]
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">default</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">view_exists</span>
        <span class="ruby-identifier">default</span> = <span class="ruby-identifier">select_value</span> <span class="ruby-node">&quot;
          SELECT c.COLUMN_DEFAULT
          FROM #{database}INFORMATION_SCHEMA.COLUMNS c
          WHERE c.TABLE_NAME = &#39;#{view_tblnm}&#39;
          AND c.COLUMN_NAME = &#39;#{views_real_column_name(table_name, ci[:name])}&#39;&quot;</span>.<span class="ruby-identifier">squish</span>, <span class="ruby-string">&#39;SCHEMA&#39;</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">case</span> <span class="ruby-identifier">default</span>
      <span class="ruby-keyword">when</span> <span class="ruby-keyword">nil</span>
        [<span class="ruby-keyword">nil</span>, <span class="ruby-keyword">nil</span>]
      <span class="ruby-keyword">when</span> <span class="ruby-regexp">/\A\((\w+\(\))\)\Z/</span>
        <span class="ruby-identifier">default_function</span> = <span class="ruby-constant">Regexp</span>.<span class="ruby-identifier">last_match</span>[<span class="ruby-value">1</span>]
        [<span class="ruby-keyword">nil</span>, <span class="ruby-identifier">default_function</span>]
      <span class="ruby-keyword">when</span> <span class="ruby-regexp">/\A\(N&#39;(.*)&#39;\)\Z/m</span>
        <span class="ruby-identifier">string_literal</span> = <span class="ruby-constant">SQLServer</span><span class="ruby-operator">::</span><span class="ruby-constant">Utils</span>.<span class="ruby-identifier">unquote_string</span>(<span class="ruby-constant">Regexp</span>.<span class="ruby-identifier">last_match</span>[<span class="ruby-value">1</span>])
        [<span class="ruby-identifier">string_literal</span>, <span class="ruby-keyword">nil</span>]
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">type</span> = <span class="ruby-keyword">case</span> <span class="ruby-identifier">ci</span>[<span class="ruby-value">:type</span>]
               <span class="ruby-keyword">when</span> <span class="ruby-regexp">/smallint|int|bigint/</span> <span class="ruby-keyword">then</span> <span class="ruby-identifier">ci</span>[<span class="ruby-value">:_type</span>]
               <span class="ruby-keyword">else</span> <span class="ruby-identifier">ci</span>[<span class="ruby-value">:type</span>]
               <span class="ruby-keyword">end</span>
        <span class="ruby-identifier">value</span> = <span class="ruby-identifier">default</span>.<span class="ruby-identifier">match</span>(<span class="ruby-regexp">/\A\((.*)\)\Z/m</span>)[<span class="ruby-value">1</span>]
        <span class="ruby-identifier">value</span> = <span class="ruby-identifier">select_value</span> <span class="ruby-node">&quot;SELECT CAST(#{value} AS #{type}) AS value&quot;</span>, <span class="ruby-string">&#39;SCHEMA&#39;</span>
        [<span class="ruby-identifier">value</span>, <span class="ruby-keyword">nil</span>]
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">ci</span>[<span class="ruby-value">:null</span>] = <span class="ruby-identifier">ci</span>[<span class="ruby-value">:is_nullable</span>].<span class="ruby-identifier">to_i</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span>
    <span class="ruby-identifier">ci</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value">:is_nullable</span>)
    <span class="ruby-identifier">ci</span>[<span class="ruby-value">:is_primary</span>] = <span class="ruby-identifier">ci</span>[<span class="ruby-value">:is_primary</span>].<span class="ruby-identifier">to_i</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span>
    <span class="ruby-identifier">ci</span>[<span class="ruby-value">:is_identity</span>] = <span class="ruby-identifier">ci</span>[<span class="ruby-value">:is_identity</span>].<span class="ruby-identifier">to_i</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span> <span class="ruby-keyword">unless</span> [<span class="ruby-constant">TrueClass</span>, <span class="ruby-constant">FalseClass</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">ci</span>[<span class="ruby-value">:is_identity</span>].<span class="ruby-identifier">class</span>)
    <span class="ruby-identifier">ci</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-default_constraint_name" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">default_constraint_name</span><span
            class="method-args">(table_name, column_name)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="default_constraint_name-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/sqlserver/schema_statements.rb, line 375</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">default_constraint_name</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">column_name</span>)
  <span class="ruby-node">&quot;DF_#{table_name}_#{column_name}&quot;</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-detect_column_for-21" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">detect_column_for!</span><span
            class="method-args">(table_name, column_name)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="detect_column_for-21-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/sqlserver/schema_statements.rb, line 379</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">detect_column_for!</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">column_name</span>)
  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">column</span> = <span class="ruby-identifier">schema_cache</span>.<span class="ruby-identifier">columns</span>(<span class="ruby-identifier">table_name</span>).<span class="ruby-identifier">find</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">column_name</span>.<span class="ruby-identifier">to_s</span> }
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">ActiveRecordError</span>, <span class="ruby-node">&quot;No such column: #{table_name}.#{column_name}&quot;</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">column</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-get_table_name" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">get_table_name</span><span
            class="method-args">(sql)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <h3 id="method-i-get_table_name-label-SQLServer+Specific+%28Misc+Helpers%29+%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D+%23">SQLServer Specific (Misc Helpers) ========================= #<span><a href="#method-i-get_table_name-label-SQLServer+Specific+%28Misc+Helpers%29+%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D+%23">&para;</a> <a href="#documentation">&uarr;</a></span></h3>
          
          

          
          <div class="method-source-code" id="get_table_name-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/sqlserver/schema_statements.rb, line 364</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_table_name</span>(<span class="ruby-identifier">sql</span>)
  <span class="ruby-identifier">tn</span> = <span class="ruby-keyword">if</span> <span class="ruby-identifier">sql</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/^\s*(INSERT|EXEC sp_executesql N&#39;INSERT)(\s+INTO)?\s+([^\(\s]+)\s*|^\s*update\s+([^\(\s]+)\s*/i</span>
    <span class="ruby-constant">Regexp</span>.<span class="ruby-identifier">last_match</span>[<span class="ruby-value">3</span>] <span class="ruby-operator">||</span> <span class="ruby-constant">Regexp</span>.<span class="ruby-identifier">last_match</span>[<span class="ruby-value">4</span>]
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">sql</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/FROM\s+([^\(\s]+)\s*/i</span>
    <span class="ruby-constant">Regexp</span>.<span class="ruby-identifier">last_match</span>[<span class="ruby-value">1</span>]
  <span class="ruby-keyword">else</span>
    <span class="ruby-keyword">nil</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-constant">SQLServer</span><span class="ruby-operator">::</span><span class="ruby-constant">Utils</span>.<span class="ruby-identifier">extract_identifiers</span>(<span class="ruby-identifier">tn</span>).<span class="ruby-identifier">object</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-identity_column" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">identity_column</span><span
            class="method-args">(table_name)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="identity_column-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/sqlserver/schema_statements.rb, line 441</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">identity_column</span>(<span class="ruby-identifier">table_name</span>)
  <span class="ruby-identifier">schema_cache</span>.<span class="ruby-identifier">columns</span>(<span class="ruby-identifier">table_name</span>).<span class="ruby-identifier">find</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:is_identity?</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-info_schema_table_name_column" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">info_schema_table_name_column</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="info_schema_table_name_column-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/sqlserver/schema_statements.rb, line 332</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">info_schema_table_name_column</span>
  <span class="ruby-ivar">@info_schema_table_name_column</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">new_column</span> <span class="ruby-string">&#39;table_name&#39;</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">lookup_cast_type</span>(<span class="ruby-string">&#39;nvarchar(128)&#39;</span>), <span class="ruby-string">&#39;nvarchar(128)&#39;</span>, <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-info_schema_table_schema_column" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">info_schema_table_schema_column</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="info_schema_table_schema_column-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/sqlserver/schema_statements.rb, line 336</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">info_schema_table_schema_column</span>
  <span class="ruby-ivar">@info_schema_table_schema_column</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">new_column</span> <span class="ruby-string">&#39;table_schema&#39;</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">lookup_cast_type</span>(<span class="ruby-string">&#39;nvarchar(128)&#39;</span>), <span class="ruby-string">&#39;nvarchar(128)&#39;</span>, <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-initialize_native_database_types" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">initialize_native_database_types</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <h3 id="method-i-initialize_native_database_types-label-SQLServer+Specific+%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D+%23">SQLServer Specific ======================================== #<span><a href="#method-i-initialize_native_database_types-label-SQLServer+Specific+%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D+%23">&para;</a> <a href="#documentation">&uarr;</a></span></h3>
          
          

          
          <div class="method-source-code" id="initialize_native_database_types-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/sqlserver/schema_statements.rb, line 191</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize_native_database_types</span>
  {
    <span class="ruby-identifier">primary_key</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;int NOT NULL IDENTITY(1,1) PRIMARY KEY&#39;</span>,
    <span class="ruby-identifier">integer</span><span class="ruby-operator">:</span> { <span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;int&#39;</span>, <span class="ruby-identifier">limit</span><span class="ruby-operator">:</span> <span class="ruby-value">4</span> },
    <span class="ruby-identifier">bigint</span><span class="ruby-operator">:</span> { <span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;bigint&#39;</span> },
    <span class="ruby-identifier">boolean</span><span class="ruby-operator">:</span> { <span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;bit&#39;</span> },
    <span class="ruby-identifier">decimal</span><span class="ruby-operator">:</span> { <span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;decimal&#39;</span> },
    <span class="ruby-identifier">money</span><span class="ruby-operator">:</span> { <span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;money&#39;</span> },
    <span class="ruby-identifier">smallmoney</span><span class="ruby-operator">:</span> { <span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;smallmoney&#39;</span> },
    <span class="ruby-identifier">float</span><span class="ruby-operator">:</span> { <span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;float&#39;</span> },
    <span class="ruby-identifier">real</span><span class="ruby-operator">:</span> { <span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;real&#39;</span> },
    <span class="ruby-identifier">date</span><span class="ruby-operator">:</span> { <span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;date&#39;</span> },
    <span class="ruby-identifier">datetime</span><span class="ruby-operator">:</span> { <span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;datetime&#39;</span> },
    <span class="ruby-identifier">timestamp</span><span class="ruby-operator">:</span> { <span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;datetime&#39;</span> },
    <span class="ruby-identifier">time</span><span class="ruby-operator">:</span> { <span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;time&#39;</span> },
    <span class="ruby-identifier">char</span><span class="ruby-operator">:</span> { <span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;char&#39;</span> },
    <span class="ruby-identifier">varchar</span><span class="ruby-operator">:</span> { <span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;varchar&#39;</span>, <span class="ruby-identifier">limit</span><span class="ruby-operator">:</span> <span class="ruby-value">8000</span> },
    <span class="ruby-identifier">varchar_max</span><span class="ruby-operator">:</span> { <span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;varchar(max)&#39;</span> },
    <span class="ruby-identifier">text_basic</span><span class="ruby-operator">:</span> { <span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;text&#39;</span> },
    <span class="ruby-identifier">nchar</span><span class="ruby-operator">:</span> { <span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;nchar&#39;</span> },
    <span class="ruby-identifier">string</span><span class="ruby-operator">:</span> { <span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;nvarchar&#39;</span>, <span class="ruby-identifier">limit</span><span class="ruby-operator">:</span> <span class="ruby-value">4000</span> },
    <span class="ruby-identifier">text</span><span class="ruby-operator">:</span> { <span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;nvarchar(max)&#39;</span> },
    <span class="ruby-identifier">ntext</span><span class="ruby-operator">:</span> { <span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;ntext&#39;</span> },
    <span class="ruby-identifier">binary_basic</span><span class="ruby-operator">:</span> { <span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;binary&#39;</span> },
    <span class="ruby-identifier">varbinary</span><span class="ruby-operator">:</span> { <span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;varbinary&#39;</span>, <span class="ruby-identifier">limit</span><span class="ruby-operator">:</span> <span class="ruby-value">8000</span> },
    <span class="ruby-identifier">binary</span><span class="ruby-operator">:</span> { <span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;varbinary(max)&#39;</span> },
    <span class="ruby-identifier">uuid</span><span class="ruby-operator">:</span> { <span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;uniqueidentifier&#39;</span> },
    <span class="ruby-identifier">ss_timestamp</span><span class="ruby-operator">:</span> { <span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;timestamp&#39;</span> }
  }
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-insert_sql-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">insert_sql?</span><span
            class="method-args">(sql)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="insert_sql-3F-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/sqlserver/schema_statements.rb, line 437</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">insert_sql?</span>(<span class="ruby-identifier">sql</span>)
  <span class="ruby-operator">!</span>(<span class="ruby-identifier">sql</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/^\s*(INSERT|EXEC sp_executesql N&#39;INSERT)/i</span>).<span class="ruby-identifier">nil?</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-lowercase_schema_reflection_sql" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">lowercase_schema_reflection_sql</span><span
            class="method-args">(node)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="lowercase_schema_reflection_sql-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/sqlserver/schema_statements.rb, line 386</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">lowercase_schema_reflection_sql</span>(<span class="ruby-identifier">node</span>)
  <span class="ruby-identifier">lowercase_schema_reflection</span> <span class="ruby-operator">?</span> <span class="ruby-node">&quot;LOWER(#{node})&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">node</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-query_requires_identity_insert-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">query_requires_identity_insert?</span><span
            class="method-args">(sql)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <h3 id="method-i-query_requires_identity_insert-3F-label-SQLServer+Specific+%28Identity+Inserts%29+%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D+%23">SQLServer Specific (Identity Inserts) ===================== #<span><a href="#method-i-query_requires_identity_insert-3F-label-SQLServer+Specific+%28Identity+Inserts%29+%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D+%23">&para;</a> <a href="#documentation">&uarr;</a></span></h3>
          
          

          
          <div class="method-source-code" id="query_requires_identity_insert-3F-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/sqlserver/schema_statements.rb, line 427</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">query_requires_identity_insert?</span>(<span class="ruby-identifier">sql</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">insert_sql?</span>(<span class="ruby-identifier">sql</span>)
    <span class="ruby-identifier">table_name</span> = <span class="ruby-identifier">get_table_name</span>(<span class="ruby-identifier">sql</span>)
    <span class="ruby-identifier">id_column</span> = <span class="ruby-identifier">identity_column</span>(<span class="ruby-identifier">table_name</span>)
    <span class="ruby-identifier">id_column</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">sql</span> <span class="ruby-operator">=~</span> <span class="ruby-node">/^\s*(INSERT|EXEC sp_executesql N&#39;INSERT)[^(]+\([^)]*\b(#{id_column.name})\b,?[^)]*\)/i</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">quote_table_name</span>(<span class="ruby-identifier">table_name</span>) <span class="ruby-operator">:</span> <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-remove_check_constraints" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">remove_check_constraints</span><span
            class="method-args">(table_name, column_name)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="remove_check_constraints-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/sqlserver/schema_statements.rb, line 340</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">remove_check_constraints</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">column_name</span>)
  <span class="ruby-identifier">constraints</span> = <span class="ruby-identifier">select_values</span> <span class="ruby-node">&quot;SELECT CONSTRAINT_NAME FROM INFORMATION_SCHEMA.CONSTRAINT_COLUMN_USAGE where TABLE_NAME = &#39;#{quote_string(table_name)}&#39; and COLUMN_NAME = &#39;#{quote_string(column_name)}&#39;&quot;</span>, <span class="ruby-string">&#39;SCHEMA&#39;</span>
  <span class="ruby-identifier">constraints</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">constraint</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">do_execute</span> <span class="ruby-node">&quot;ALTER TABLE #{quote_table_name(table_name)} DROP CONSTRAINT #{quote_column_name(constraint)}&quot;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-remove_default_constraint" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">remove_default_constraint</span><span
            class="method-args">(table_name, column_name)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="remove_default_constraint-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/sqlserver/schema_statements.rb, line 347</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">remove_default_constraint</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">column_name</span>)
  <span class="ruby-comment"># If their are foreign keys in this table, we could still get back a 2D array, so flatten just in case.</span>
  <span class="ruby-identifier">execute_procedure</span>(<span class="ruby-value">:sp_helpconstraint</span>, <span class="ruby-identifier">table_name</span>, <span class="ruby-string">&#39;nomsg&#39;</span>).<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">select</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">row</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">row</span>[<span class="ruby-string">&#39;constraint_type&#39;</span>] <span class="ruby-operator">==</span> <span class="ruby-node">&quot;DEFAULT on column #{column_name}&quot;</span>
  <span class="ruby-keyword">end</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">row</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">do_execute</span> <span class="ruby-node">&quot;ALTER TABLE #{quote_table_name(table_name)} DROP CONSTRAINT #{row[&#39;constraint_name&#39;]}&quot;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-remove_indexes" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">remove_indexes</span><span
            class="method-args">(table_name, column_name)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="remove_indexes-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/sqlserver/schema_statements.rb, line 356</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">remove_indexes</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">column_name</span>)
  <span class="ruby-identifier">indexes</span>(<span class="ruby-identifier">table_name</span>).<span class="ruby-identifier">select</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">index</span><span class="ruby-operator">|</span> <span class="ruby-identifier">index</span>.<span class="ruby-identifier">columns</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">column_name</span>.<span class="ruby-identifier">to_s</span>) }.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">index</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">remove_index</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-identifier">index</span>.<span class="ruby-identifier">name</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-table_name_or_views_table_name" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">table_name_or_views_table_name</span><span
            class="method-args">(table_name)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="table_name_or_views_table_name-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/sqlserver/schema_statements.rb, line 414</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">table_name_or_views_table_name</span>(<span class="ruby-identifier">table_name</span>)
  <span class="ruby-identifier">schema_cache</span>.<span class="ruby-identifier">view_exists?</span>(<span class="ruby-identifier">table_name</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">view_table_name</span>(<span class="ruby-identifier">table_name</span>) <span class="ruby-operator">:</span> <span class="ruby-identifier">table_name</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-view_information" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">view_information</span><span
            class="method-args">(table_name)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="view_information-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/sqlserver/schema_statements.rb, line 397</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">view_information</span>(<span class="ruby-identifier">table_name</span>)
  <span class="ruby-identifier">identifier</span> = <span class="ruby-constant">SQLServer</span><span class="ruby-operator">::</span><span class="ruby-constant">Utils</span>.<span class="ruby-identifier">extract_identifiers</span>(<span class="ruby-identifier">table_name</span>)
  <span class="ruby-identifier">view_info</span> = <span class="ruby-identifier">select_one</span> <span class="ruby-node">&quot;SELECT * FROM INFORMATION_SCHEMA.VIEWS WHERE TABLE_NAME = &#39;#{identifier.object}&#39;&quot;</span>, <span class="ruby-string">&#39;SCHEMA&#39;</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">view_info</span>
    <span class="ruby-identifier">view_info</span> = <span class="ruby-identifier">view_info</span>.<span class="ruby-identifier">with_indifferent_access</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">view_info</span>[<span class="ruby-value">:VIEW_DEFINITION</span>].<span class="ruby-identifier">blank?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">view_info</span>[<span class="ruby-value">:VIEW_DEFINITION</span>].<span class="ruby-identifier">length</span> <span class="ruby-operator">==</span> <span class="ruby-value">4000</span>
      <span class="ruby-identifier">view_info</span>[<span class="ruby-value">:VIEW_DEFINITION</span>] = <span class="ruby-keyword">begin</span>
        <span class="ruby-identifier">select_values</span>(<span class="ruby-node">&quot;EXEC sp_helptext #{identifier.object_quoted}&quot;</span>, <span class="ruby-string">&#39;SCHEMA&#39;</span>).<span class="ruby-identifier">join</span>
      <span class="ruby-keyword">rescue</span>
        <span class="ruby-identifier">warn</span> <span class="ruby-string">&quot;No view definition found, possible permissions problem.\nPlease run GRANT VIEW DEFINITION TO your_user;&quot;</span>
        <span class="ruby-keyword">nil</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">view_info</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-view_table_name" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">view_table_name</span><span
            class="method-args">(table_name)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <h3 id="method-i-view_table_name-label-SQLServer+Specific+%28View+Reflection%29+%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D+%23">SQLServer Specific (View Reflection) ====================== #<span><a href="#method-i-view_table_name-label-SQLServer+Specific+%28View+Reflection%29+%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D+%23">&para;</a> <a href="#documentation">&uarr;</a></span></h3>
          
          

          
          <div class="method-source-code" id="view_table_name-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/sqlserver/schema_statements.rb, line 392</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">view_table_name</span>(<span class="ruby-identifier">table_name</span>)
  <span class="ruby-identifier">view_info</span> = <span class="ruby-identifier">schema_cache</span>.<span class="ruby-identifier">view_information</span>(<span class="ruby-identifier">table_name</span>)
  <span class="ruby-identifier">view_info</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">get_table_name</span>(<span class="ruby-identifier">view_info</span>[<span class="ruby-string">&#39;VIEW_DEFINITION&#39;</span>]) <span class="ruby-operator">:</span> <span class="ruby-identifier">table_name</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-views_real_column_name" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">views_real_column_name</span><span
            class="method-args">(table_name, column_name)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="views_real_column_name-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/sqlserver/schema_statements.rb, line 418</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">views_real_column_name</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">column_name</span>)
  <span class="ruby-identifier">view_definition</span> = <span class="ruby-identifier">schema_cache</span>.<span class="ruby-identifier">view_information</span>(<span class="ruby-identifier">table_name</span>)[<span class="ruby-value">:VIEW_DEFINITION</span>]
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">column_name</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">view_definition</span>
  <span class="ruby-identifier">match_data</span> = <span class="ruby-identifier">view_definition</span>.<span class="ruby-identifier">match</span>(<span class="ruby-node">/([\w-]*)\s+as\s+#{column_name}/im</span>)
  <span class="ruby-identifier">match_data</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">match_data</span>[<span class="ruby-value">1</span>] <span class="ruby-operator">:</span> <span class="ruby-identifier">column_name</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="private-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Private Instance Methods</h3>
       </header>

    
      <div id="method-i-create_table_definition" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">create_table_definition</span><span
            class="method-args">(name, temporary, options, as = nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="create_table_definition-source">
            <pre><span class="ruby-comment"># File lib/active_record/connection_adapters/sqlserver/schema_statements.rb, line 448</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">create_table_definition</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">temporary</span>, <span class="ruby-identifier">options</span>, <span class="ruby-identifier">as</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-constant">SQLServer</span><span class="ruby-operator">::</span><span class="ruby-constant">TableDefinition</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">native_database_types</span>, <span class="ruby-identifier">name</span>, <span class="ruby-identifier">temporary</span>, <span class="ruby-identifier">options</span>, <span class="ruby-identifier">as</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://rdoc.rubyforge.org">RDoc</a> 4.1.0.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

